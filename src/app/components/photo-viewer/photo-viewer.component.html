<div class="flex flex-col bg-black text-white items-center justify-center">
    <!-- Header -->
    <div class="flex justify-between items-center p-4 shrink-0">
        <span class="text-sm">{{ currentIndex + 1 }} / {{ data.photos.length }}</span>
        <button mat-icon-button (click)="close()" class="!text-white">
            <mat-icon>close</mat-icon>
        </button>
    </div>

    <!-- Image -->
    <div class="flex-1 flex items-center justify-center min-h-0">
        <img [src]="data.photos[currentIndex]" [alt]="'Photo ' + (currentIndex + 1)" (touchstart)="onTouchStart($event)"
            (touchmove)="onTouchMove($event)" (touchend)="onTouchEnd($event)"
            class="max-w-full max-h-80 object-contain" />
    </div>

    <!-- Navigation dots -->
    @if (data.photos.length > 1) {
    <div class="flex justify-center gap-2 py-4 shrink-0">
        @for (photo of data.photos; track $index) {
        <button (click)="currentIndex = $index" class="w-2 h-2 rounded-full transition-all"
            [class.bg-white]="currentIndex === $index" [class.w-3]="currentIndex === $index"
            [class.bg-gray-500]="currentIndex !== $index">
        </button>
        }
    </div>
    }

    <!-- Boutons -->
    <div class="grid grid-cols-2 gap-2">
        <button
            class="flex items-center justify-center gap-2 bg-red-600 hover:bg-red-700 text-white px-2 py-2 rounded"
            (click)="deletePhoto()">
            <mat-icon>delete</mat-icon>
            Supprimer
        </button>
        

        @if (data.photos.length > 1) {
        <button class="flex-1 flex items-center justify-center gap-2 bg-yellow-400 text-white px-2 py-3 rounded"
            (click)="setAsMainImage()">
            <mat-icon>star</mat-icon>
            Set Main
        </button>
        <!--
        <button [disabled]="currentIndex === 0" (click)="currentIndex = currentIndex - 1"
            class="flex items-center justify-center gap-2 bg-gray-700 hover:bg-gray-800 text-white px-4 py-2 rounded">
            <mat-icon>chevron_left</mat-icon>
        </button>
        <button [disabled]="currentIndex === data.photos.length - 1 "
            class="flex items-center justify-center gap-2 bg-gray-700 hover:bg-gray-800 text-white px-4 py-2 rounded"
            (click)="currentIndex = currentIndex + 1">
            <mat-icon>chevron_right</mat-icon>
        </button>
        -->
    }
        
    </div>
</div>